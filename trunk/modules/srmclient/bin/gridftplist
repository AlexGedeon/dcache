#! /bin/sh

#DEBUG=true
#SECURITY_DEBUG=true 
#DEBUG=false
if [ "$SRM_PATH" = "" ]
then
  echo SRM_PATH is not set
  exit 1
fi

if [ ! -f $SRM_PATH/lib/srm_client.jar ]
then
  echo cannot find $SRM_PATH/lib/srm_client.jar
  exit 1
fi


SRM_CP=$SRM_PATH/lib/srm_client.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/srm.jar

# globus cog
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/cryptix.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/ce-jdk13-120.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/log4j-1.2.8.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/cog-jglobus.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/cryptix-asn1.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/cryptix32.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/junit.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/puretls.jar


OPTIONS="-Djava.protocol.handler.pkgs=org.globus.net.protocol"

if [ "$SECURITY_DEBUG" = "true" ]
then
  OPTIONS=" ${OPTIONS} -Dlog4j.configuration=${SRM_PATH}/bin/log4j.properties.all"
fi

#OPTIONS=" ${OPTIONS} -Dorg.globus.tcp.port.range=50000,50050"

cmd="java -cp $SRM_CP $OPTIONS org.dcache.srm.util.GridftpList  $*"
if [ "$DEBUG" = "true" ]
then
	echo $cmd
fi
$cmd
