<project name="junit" xmlns:artifact="antlib:org.apache.maven.artifact.ant">
    <target name="-test-cond">
        <condition property="test-all">
            <not>
                <or>
                    <isset property="testcase"/>
                    <isset property="testdir"/>
                </or>
            </not>
        </condition>
    </target>

    <target name="-test-testcase" if="testcase">
        <artifact:mvn pom="${maven.pom}"
                      mavenHome="${maven.home}"
                      fork="true">
            <jvmarg value="-XX:MaxPermSize=256m"/>
            <arg value="verify"/>
            <arg value="-Dtest=${testcase}"/>
            <arg value="-DfailIfNoTests=false"/>
        </artifact:mvn>
    </target>

    <target name="-test-testdir" description="Run Unit tests" if="testdir">
        <artifact:mvn pom="${maven.pom}"
                      mavenHome="${maven.home}"
                      fork="true">
            <jvmarg value="-XX:MaxPermSize=256m"/>
            <arg value="verify"/>
            <arg value="-am"/>
            <arg value="-pl"/>
            <arg value="${testdir}"/>
            <arg value="-DfailIfNoTests=false"/>
        </artifact:mvn>
    </target>

    <target name="-test-all" description="Run Unit tests" if="test-all">
        <artifact:mvn pom="${maven.pom}"
                      mavenHome="${maven.home}"
                      fork="true">
            <jvmarg value="-XX:MaxPermSize=256m"/>
            <arg value="verify"/>
            <arg value="-Dtest=${testcase}"/>
            <arg value="-DfailIfNoTests=false"/>
        </artifact:mvn>
    </target>
</project>
