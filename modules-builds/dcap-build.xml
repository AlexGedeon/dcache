<!-- $Id: dcap-build.xml,v 1.9 2007-04-24 09:43:18 tigran Exp $ -->

<project name="dCap" default="help" basedir=".">

    <property name="javatunnel.build.dir" location="${buildDir}/javatunnel" />

    <!--
          Properties  -  the following properties, paths, and selectors
                         define the locations and files for dCap
    -->

    <!-- Output Files
       For each of these jar files there are targets below -->

    <property name="javatunnel.jar" location="${classesDir}/javatunnel.jar" />

    <!-- Classpath for javatunnel.jar -->

    <path id="javatunnel.classpath">
        <fileset dir="${libDir}/cog" includes="**/*.jar" />
        <fileset dir="${libDir}/gplazma" includes="**/*.jar" />
        <pathelement location="${classesDir}/cells.jar" />
        <pathelement location="${classesDir}/dcache-common.jar" />
        <pathelement location="${classesDir}/gplazma.jar" />
        <fileset dir="${libDir}/logback" includes="*.jar" />
        <path refid="dependency.classpath" />
    </path>



    <!--
             Targets for javatunnel.jar
    -->

    <!--
        Compile dcap door side security tunnel
    -->

    <target name="-javatunnel.compile">

        <mkdir dir="${javatunnel.build.dir}" />

        <javac destdir="${javatunnel.build.dir}" source="${javac.source}" target="${javac.target}" debug="${javac.debug}" verbose="${javac.verbose}">
            <src path="${javatunnel.src}" />

            <classpath refid="javatunnel.classpath" />

        </javac>

    </target>

    <!--
        build the jar, compile if required
    -->

    <target name="-javatunnel.jar" depends="-javatunnel.compile">

        <jar jarfile="${javatunnel.jar}">
            <fileset dir="${javatunnel.build.dir}" includes="**/*.class" />
        </jar>

    </target>


    <!--
        'install' into  ${server.bin.dir}/classes
    -->
    <target name="-javatunnel.bin" depends="-javatunnel.jar">

        <mkdir dir="${server.bin.dir}/classes" />
        <copy file="${javatunnel.jar}" todir="${server.bin.dir}/classes" />

    </target>


</project>
