<!-- $Id: infoProvider-build.xml,v 1.5 2006-09-04 15:14:39 tigran Exp $ -->

<project name="infoProvider" default="help" basedir=".">

  <!-- package name. have to be the same as in the cvs -->
  <property name="package" value="infoProvider" />


	<!--
          Property initialization
  -->


	<import file="${buildTop}/common/common.xml"/>

	<!-- destDir will be used by the copylibs target to get the external lib files to a central place -->

	<!-- internal properties and paths -->
	<property name="infoProvider.jar" location="${classesDir}/infoDynamicSE.jar" />

	<!-- Classpath for infoProvider.jar -->

	<path id="infoprovider.classpath">
      <pathelement location="${classesDir}/cells.jar" />
      <pathelement location="${classesDir}/dcache.jar" />
      <pathelement location="${libDir}/jclarens/clarens-discovery.jar" />
      <fileset dir="${axis.untared}" includes="**/*.jar" />
	</path>
	<!--
          Directory creation
  -->

	<target name="prepare">
		<mkdir dir="${buildDir}" />
	</target>

	<!--
          Clean Targets
  -->

	<target name="clean">
		<delete dir="${buildDir}" />
	</target>

	<target name="cleanall" depends="clean">
		<delete file="${infoProvider.jar}" />
	</target>

	<!--
          Build infoProvider
  -->

	<target name="infoProvider" depends="prepare">

		<mkdir dir="${buildDir}/infoProvider" />

		<javac destdir="${buildDir}/infoProvider" classpathref="infoprovider.classpath" source="${javac.source}" target="${javac.target}" debug="${javac.debug}" verbose="${javac.verbose}">
			<src path="${sourceDir}" />
		</javac>

	</target>

	<target name="infoProvider.jar" depends="infoProvider">

		<jar jarfile="${infoProvider.jar}">
			<fileset dir="${buildDir}/infoProvider" includes="**/*.class" />
			<manifest>
				<attribute name="Main-Class" value="infoDynamicSE.InfoProvider" />
				<section name="Shared">
					<attribute name="Title" value="dCache Core" />
					<attribute name="Vendor" value="dCache.ORG" />
					<attribute name="Date" value="${jar.timestamp}" />
				</section>
				<section name="Copyright">
					<attribute name="Copy" value="(C) dCache.ORG  2000 - 2006" />
				</section>
			</manifest>
		</jar>

	</target>


	<target name="infoProvider-bin" depends="infoProvider.jar">

		<mkdir dir="${binDir}/classes" />
		<mkdir dir="${binDir}/config" />

		<!-- jar file  -->
		<copy file="${infoProvider.jar}" todir="${binDir}/classes" />

	</target>



</project>
