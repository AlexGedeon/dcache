#  -----------------------------------------------------------------------
#     Default values for billing
#  -----------------------------------------------------------------------
#
#   This Java properties file contains default values for billing
#   configuration parameters. All values can be redefined in
#   etc/dcache.conf. Do not modify any values here as your changes
#   will be lost when you next upgrade.

#  ---- Cell name of billing service
#
billing/cell.name=billing

#  ---- Directory for billing logs
#
#   The directory within which the billing logs are to be written.
#
billingDb=${dcache.paths.billing}

#  ---- Disable billing to plain text file
#
#   Set to -noTXT to disable billing to plain text files.
#
billingDisableTxt=


#  -----------------------------------------------------------------------
#     Format of billing entries for the output in the plain text biling file
#  -----------------------------------------------------------------------

#  ---- Available parameters for all messages:
#
#   $date$ - date of transfer
#   $pnfsid$ - pnfsid of a file
#   $filesize$ - file size
#   $cellName$ - the name of the cell, message comming from
#   $cellType$ - type of the cell, message comming from
#   $messageType$ - type of the incomming message. It could be a MoverInforMessage or PnfsFileInfoMessage etc.
#   $path$ - path of the requested file
#   $storageInfo$ - storage info of the requested file
#   $rc$ - result code.
#   $message$ - result message (is empty in case of success and has a text message in case of an error.

#  ---- Available parameters for transfer messages:
#
#   $dataTransferred$ - transferred data
#   $connectionTime$ - connection time
#   $fileCreated$ - info about if the file is newly created
#   $protocolInfo$ - protocolInfo of the transfer
#   $initiator$ - cell name initiated the transfer
#   $subject$ - security-related information of identities of a single person.

poolTransferMessage=$date$ [$cellType$:$cellName$:$messageType$] [$pnfsid$,$filesize$] [$path$] $storageInfo$ $dataTransferred$ $connectionTime$ $fileCreated$ {$protocolInfo$} [$initiator$] {$rc$:$message$}

#  ---- Formatting the remove file message:
#

poolRemoveMessage=$date$ [$cellType$:$cellName$:$messageType$] [$pnfsid$,$filesize$] [$path$] $storageInfo$ {$rc$:$message$}

#  ---- Available parameters only for door messages:
#
#
#   $transactionTime$ - transaction time
#   $timeQueued$ - time queued
#   $subject$ - security-related information of identities of a single person.

doorMessage=$date$ [$cellType$:$cellName$:$messageType$] [$subject$] [$pnfsid$,$filesize$] [$path$] $storageInfo$ $transactionTime$ $timeQueued$ {$rc$:$message$}

#  ---- Available parameters for storage (store/restore) messages:
#
#   $transferTime$ - transfer time
#   $timeQueued$ - time queued

storageMessage=$date$ [$cellType$:$cellName$:$messageType$] [$pnfsid$,$filesize$] [$path$] $storageInfo$ $transferTime$ $timeQueued$ {$rc$:$message$}

#  -----------------------------------------------------------------------
#     Store billing data in database
##  -----------------------------------------------------------------------

#   This variable describes whether the billing information should be
#   written to a PostgreSQL database.  Valid values are 'no' and 'yes'.
#
#   When enabled, a database must be prepared for use with the billing
#   cell. See the dCache book for details.
#
billingToDb=no

# ---- Password file
#
#  The following enables using pgfile, which is disabled by default
#  billingDbPgPassFileName=/root/.pgpass
#
billingDbPgPassFileName=

#  ---- Database host name
#
billingDatabaseHost=localhost

#  ---- Database user name
#
billingDbUser=srmdcache

#  ---- Database user password
#
billingDbPass=srmdcache

#  ---- Database name
#
billingDbName=billing

billingDbCommitRows=100
billingDbCommitIntervalInMilliseconds=30000

#
# Database related settings reserved for internal use.
#
billing/db.name=${billingDbName}
billing/db.user=${billingDbUser}
billing/db.host=${billingDatabaseHost}
billing/db.password=${billingDbPass}
billing/db.driver=org.postgresql.Driver
billing/db.url=jdbc:postgresql://${db.host}/${db.name}
billing/db.schema.auto=true
