#
# Xrootd door
#

onerror shutdown

check -strong cell.name
check -strong port
check -strong xrootdPoolTimeout
check -strong xrootdThreads
check -strong xrootdMaxChannelMemorySize
check -strong xrootdRootPath
check -strong xrootdPoolManagerTimeout
check -strong xrootdMoverTimeout
check -strong xrootdAuthzPlugin
check -strong xrootdAuthzKeystore
check -strong xrootdUser
check -strong xrootdIsReadOnly
check -strong poolmanager
check -strong pnfsmanager
check -strong loginBrokerUpdateTime
check -strong loginBrokerUpdateThreshold

check xrootdAllowedReadPaths
check xrootdAllowedWritePaths
check xrootdIoQueue
check loginBroker

onerror continue

create org.dcache.cells.UniversalSpringCell ${cell.name} \
       "classpath:org/dcache/xrootd2/door/xrootd.xml -export\
       -cellClass=XrootdDoor \
       -xrootdPort=${port} \
       -xrootdPoolTimeout=${xrootdPoolTimeout} \
       -xrootdThreads=${xrootdThreads} \
       -xrootdMaxChannelMemorySize=${xrootdMaxChannelMemorySize} \
       -xrootdMaxTotalMemorySize=${xrootdMaxTotalMemorySize} \
       -xrootdRootPath=${xrootdRootPath} \
       -xrootdReadPaths=${xrootdAllowedReadPaths} \
       -xrootdWritePaths=${xrootdAllowedWritePaths} \
       -xrootdUser=${xrootdUser} \
       -xrootdPoolManagerTimeout=${xrootdPoolManagerTimeout} \
       -xrootdMoverTimeout=${xrootdMoverTimeout} \
       -xrootdAuthzPlugin=${xrootdAuthzPlugin} \
       -xrootdIoQueue=${xrootdIoQueue} \
       -xrootdAuthzKeystore=${xrootdAuthzKeystore} \
       -xrootdIsReadOnly=${xrootdIsReadOnly} \
       -poolmanager=${poolmanager} \
       -pnfsmanager=${pnfsmanager} \
       -loginBrokerUpdateTime=${loginBrokerUpdateTime} \
       -loginBrokerUpdateThreshold=${loginBrokerUpdateThreshold} \
       -loginBroker=${loginBroker} \
       "

