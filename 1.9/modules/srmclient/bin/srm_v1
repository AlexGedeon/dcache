#!/bin/sh

#DEBUG=true
if [ "$SRM_PATH" = "" ]
then
  echo SRM_PATH is not set
  exit 1
fi

if [ ! -f $SRM_PATH/lib/srm_client.jar ]
then
  echo cannot find $SRM_PATH/lib/srm_client.jar
  exit 1
fi

if [ ! -f $SRM_PATH/lib/glue/GLUE-STD.jar ]
then
  echo cannot find $SRM_PATH/lib/glue/GLUE-STD.jar
  exit 1
fi

SRM_CP=$SRM_PATH/lib/srm_client.jar:$SRM_PATH/lib/glue/GLUE-STD.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/glue/dom.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/glue/servlet.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/glue/jnet.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/glue/jsse.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/glue/jcert.jar

# globus cog jars
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/cog.jar:$SRM_PATH/lib/globus/iaik_javax_crypto.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/iaik_jce_full.jar:$SRM_PATH/lib/globus/iaik_ssl.jar
SRM_CP=$SRM_CP:$SRM_PATH/lib/globus/log4j-core.jar

#echo java -cp $SRM_CP gov.fnal.srm.client.CommandLineClientV1 -mapfile=$SRM_PATH/conf/JHRM.map $*

if [ $DEBUG = "true" ]
then
  OPTIONS=-Delectric.logging="SOAP,HTTP"
else
  OPTIONS=
fi

java -cp $SRM_CP $OPTIONS gov.fnal.srm.client.CommandLineClientV1 -mapfile=$SRM_PATH/conf/SRMServerV1.map $*
